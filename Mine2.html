<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, orientation=landscape">
    <title>Beast Parkour Ultra HD - Herobrine Dash Edition</title>
    <style>
        body { margin: 0; overflow: hidden; background: #4a90e2; font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; touch-action: none; }
        canvas { display: block; image-rendering: pixelated; }
        
        /* Interfaces Modernas */
        #menu, #deathMenu, #shopMenu, #adminPanel { 
            position: absolute; inset: 0; background: rgba(30, 40, 60, 0.85);
            backdrop-filter: blur(15px); display: flex; flex-direction: column; 
            align-items: center; justify-content: center; z-index: 200; text-align: center; color: white;
        }
        #deathMenu, #shopMenu, #adminPanel { display: none; }
        #adminPanel { border: 4px solid #ff4444; background: rgba(20, 0, 0, 0.95); z-index: 1000; }

        /* Bot√µes Estilizados */
        .btn { width: 280px; padding: 16px; margin: 10px; font-size: 18px; font-weight: bold; color: white; border: none; border-radius: 8px; cursor: pointer; transition: 0.2s; box-shadow: 0 5px #222; text-transform: uppercase; }
        .btn-start { background: #44dd44; }
        .btn-shop { background: #bb44bb; }
        .admin-btn { background: #ff4444; border-bottom: 5px solid #880000; width: 300px; }
        .btn:active { transform: translateY(4px); box-shadow: 0 1px #111; }
        
        #ui { position: absolute; top: 15px; left: 15px; background: rgba(0,0,0,0.7); color: #00ff00; padding: 12px 20px; border-radius: 5px; z-index: 100; font-family: 'Courier New', Courier, monospace; border-left: 5px solid #00ff00; cursor: pointer; }
        
        /* HUD de Recarga da Habilidade */
        #abilityHUD { position: absolute; top: 15px; right: 15px; width: 120px; height: 35px; background: rgba(0,0,0,0.8); border: 2px solid #fff; border-radius: 8px; z-index: 100; display: none; overflow: hidden; }
        #abilityFill { position: absolute; left: 0; height: 100%; width: 100%; background: #00e5ff; transition: width 0.1s; }
        #abilityText { position: relative; width: 100%; text-align: center; line-height: 35px; font-weight: bold; font-size: 14px; }

        /* Controles Mobile */
        .controls { position: absolute; bottom: 40px; width: 100%; display: flex; justify-content: space-between; padding: 0 60px; box-sizing: border-box; z-index: 500; pointer-events: none; }
        .ctrl-group { display: flex; gap: 30px; pointer-events: auto; }
        .ctrl-btn { width: 90px; height: 90px; background: rgba(255,255,255,0.1); border: 3px solid rgba(255,255,255,0.4); border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 40px; color: white; backdrop-filter: blur(5px); user-select: none; }
    </style>
</head>
<body>

    <div id="ui" style="display:none">D: <span id="dist">0</span>m | üíé <span id="coins">0</span></div>
    
    <div id="abilityHUD">
        <div id="abilityFill"></div>
        <div id="abilityText">PODER (W)</div>
    </div>

    <div id="adminPanel">
        <h1 style="color: #ff4444; text-shadow: 2px 2px #000;">TERMINAL ADMIN: GU24</h1>
        <button class="btn admin-btn" onclick="adminAddGems()">ADICIONAR 1M GEMAS üíé</button>
        <button class="btn admin-btn" onclick="adminUnlock()">LIBERAR TUDO üë§</button>
        <button class="btn admin-btn" onclick="toggleGodMode()">VOAR (GOD MODE: <span id="godStatus">OFF</span>)</button>
        <button class="btn" style="background:#555" onclick="document.getElementById('adminPanel').style.display='none'">FECHAR</button>
    </div>

    <div id="menu">
        <h1 style="font-size: 50px; text-shadow: 4px 4px #000; margin-bottom: 40px;">BEAST PARKOUR 2.0</h1>
        <button class="btn btn-start" onclick="initGame(true)">INICIAR JOGO</button>
        <button class="btn btn-shop" onclick="openShop()">PERSONAGENS</button>
    </div>

    <div id="shopMenu">
        <h1>LOJA DE SKINS</h1>
        <p>Saldo: üíé <span id="shopCoins">0</span></p>
        <div style="display:flex; gap:15px; margin:20px; justify-content: center; flex-wrap: wrap;">
            <div onclick="selectSkin('steve')" style="cursor:pointer; background:#444; padding:15px; border-radius:10px; border: 2px solid #fff;">STEVE</div>
            <div onclick="selectSkin('alex')" style="cursor:pointer; background:#e67e22; padding:15px; border-radius:10px; border: 2px solid #fff;">ALEX</div>
            <div onclick="selectSkin('mrbeast')" style="cursor:pointer; background:#00a8ff; padding:15px; border-radius:10px; border: 2px solid #fff;">MRBEAST<br><small id="mPrice">200üíé</small></div>
            <div onclick="selectSkin('herobrine')" style="cursor:pointer; background:#222; padding:15px; border-radius:10px; border: 2px solid #fff;">HEROBRINE<br><small id="hPrice">2500üíé</small></div>
        </div>
        <button class="btn" style="background:#777" onclick="document.getElementById('shopMenu').style.display='none'">VOLTAR</button>
    </div>

    <div id="deathMenu">
        <h1 style="color:#ff4444; font-size: 50px;">FALHA NA MISS√ÉO</h1>
        <p id="finalDist" style="font-size:24px;"></p>
        <button class="btn btn-start" onclick="initGame(true)">TENTAR DE NOVO</button>
    </div>

    <div class="controls" id="gameControls" style="display: none;">
        <div class="ctrl-group">
            <div class="ctrl-btn" id="btnLeft">‚Üê</div>
            <div class="ctrl-btn" id="btnRight">‚Üí</div>
        </div>
        <div class="ctrl-group">
            <div class="ctrl-btn" style="border-color:#00e5ff; color:#00e5ff" id="btnPower">W</div>
            <div class="ctrl-btn" id="btnJump">‚Üë</div>
        </div>
    </div>

    <canvas id="gameCanvas"></canvas>

<script>
const canvas = document.getElementById("gameCanvas");
const ctx = canvas.getContext("2d");
let gameRunning = false, world = {}, cameraX = 0, lastX = 0;
let coins = parseInt(localStorage.getItem("steve_coins")) || 0;
let currentSkin = localStorage.getItem("selected_skin") || "steve";
let hasMrBeast = localStorage.getItem("skin_mrbeast") === "true";
let hasHerobrine = localStorage.getItem("skin_herobrine") === "true";
let godMode = false, particles = [];

// Configura√ß√µes de Habilidade
let lastUseDist = -200; 
const DASH_COOLDOWN = 200; // Metros para recarregar
const DASH_DISTANCE = 1000; // 20 metros em pixels

const player = { x: 100, y: 0, vx: 0, vy: 0, w: 30, h: 60, onGround: false, canDoubleJump: false };
const input = { left: false, right: false };

function resize() { canvas.width = window.innerWidth; canvas.height = window.innerHeight; }
window.addEventListener('resize', resize); resize();

// --- SISTEMA ADMIN ---
function openAdmin() {
    let email = prompt("E-mail de Admin:");
    if(email === "gu24gamer@gmail.com") {
        document.getElementById("adminPanel").style.display = "flex";
    } else { alert("Acesso negado."); }
}
function adminAddGems() { coins += 1000000; save(); alert("Gemas adicionadas!"); }
function adminUnlock() { hasMrBeast = true; hasHerobrine = true; localStorage.setItem("skin_mrbeast", "true"); localStorage.setItem("skin_herobrine", "true"); alert("Tudo liberado!"); }
function toggleGodMode() { godMode = !godMode; document.getElementById("godStatus").innerText = godMode ? "ON" : "OFF"; }
function save() { localStorage.setItem("steve_coins", coins); }

// --- LOJA ---
function openShop() {
    document.getElementById("shopCoins").innerText = coins;
    document.getElementById("mPrice").innerText = hasMrBeast ? "OK" : "200üíé";
    document.getElementById("hPrice").innerText = hasHerobrine ? "OK" : "2500üíé";
    document.getElementById("shopMenu").style.display = "flex";
}
function selectSkin(skin) {
    if(skin === 'mrbeast' && !hasMrBeast && coins >= 200) { coins -= 200; hasMrBeast = true; localStorage.setItem("skin_mrbeast", "true"); save(); }
    if(skin === 'herobrine' && !hasHerobrine && coins >= 2500) { coins -= 2500; hasHerobrine = true; localStorage.setItem("skin_herobrine", "true"); save(); }
    if(skin === 'steve' || skin === 'alex' || (skin === 'mrbeast' && hasMrBeast) || (skin === 'herobrine' && hasHerobrine)) {
        currentSkin = skin; localStorage.setItem("selected_skin", skin);
    }
    document.getElementById("shopMenu").style.display = "none";
}

// --- F√çSICA E GR√ÅFICOS ---
function drawBlock(bx, by) {
    ctx.fillStyle = "rgba(0,0,0,0.2)"; ctx.fillRect(bx - cameraX + 5, by + 5, 50, 50); // Sombra
    ctx.fillStyle = "#6d4c41"; ctx.fillRect(bx - cameraX, by + 10, 50, 40); // Terra
    ctx.fillStyle = "#43a047"; ctx.fillRect(bx - cameraX, by, 50, 12); // Grama
    ctx.fillStyle = "#66bb6a"; ctx.fillRect(bx - cameraX, by, 50, 4); // Brilho
}

function createEffect(x, y, color) {
    for(let i=0; i<15; i++) particles.push({x, y, vx: Math.random()*10-5, vy: Math.random()*10-5, life: 1, color});
}

function initGame(reset) {
    document.getElementById("menu").style.display = "none";
    document.getElementById("deathMenu").style.display = "none";
    document.getElementById("gameControls").style.display = "flex";
    document.getElementById("ui").style.display = "block";
    document.getElementById("abilityHUD").style.display = (currentSkin === 'mrbeast' || currentSkin === 'herobrine') ? "block" : "none";
    if(reset) {
        world = {}; player.x = 100; player.y = 100; player.vx = 0; player.vy = 0;
        cameraX = 0; lastX = 0; lastUseDist = -200; particles = [];
        for(let i=0; i<10; i++) world[`${i*50},${Math.floor(canvas.height*0.75/50)*50}`] = "grass";
    }
    gameRunning = true; loop();
}

function triggerPower() {
    let d = Math.floor(player.x / 50);
    let pronto = (d - lastUseDist) >= DASH_COOLDOWN;

    if(currentSkin === 'herobrine' && pronto && !player.onGround) {
        createEffect(player.x - cameraX + 15, player.y + 30, "white");
        player.x += DASH_DISTANCE;
        player.vy = -2;
        lastUseDist = d;
        createEffect(player.x - cameraX + 15, player.y + 30, "#ffffff");
    } else if(currentSkin === 'mrbeast' && !player.onGround && player.canDoubleJump) {
        player.vy = -16;
        player.canDoubleJump = false;
        createEffect(player.x - cameraX + 15, player.y + 30, "#00ff00");
    }
}

function loop() {
    if(!gameRunning) return;
    let distAtual = Math.floor(player.x / 50);

    // Cooldown HUD
    if(currentSkin === 'herobrine' || currentSkin === 'mrbeast') {
        let p = Math.min(1, (distAtual - lastUseDist) / DASH_COOLDOWN);
        document.getElementById("abilityFill").style.width = (p * 100) + "%";
        document.getElementById("abilityFill").style.background = p >= 1 ? "#00ff00" : "#ffcc00";
    }

    // Movimento
    if(input.left) player.vx = -7.5; else if(input.right) player.vx = 7.5; else player.vx *= 0.8;
    player.vy += 0.85; player.x += player.vx; player.y += player.vy;

    // Colis√£o
    player.onGround = false;
    for(let pos in world) {
        let [bx, by] = pos.split(",").map(Number);
        if(player.x+25 > bx && player.x < bx+45 && player.y+60 >= by && player.y+60 <= by+20) {
            if(player.vy >= 0) { player.y = by-60; player.vy = 0; player.onGround = true; player.canDoubleJump = true; }
        }
    }

    // Gerador de Mundo
    if(player.x > lastX - 1200) {
        let bx = Math.floor((lastX + 200)/50)*50;
        let by = Math.floor((canvas.height*0.7)/50)*50 + (Math.random()*150-75);
        world[`${bx},${by}`] = "grass"; 
        world[`${bx+50},${by}`] = "grass"; 
        lastX = bx + 100;
    }

    cameraX += (player.x - canvas.width/3 - cameraX) * 0.1;

    // Desenho
    ctx.fillStyle = "#87ceeb"; ctx.fillRect(0,0,canvas.width, canvas.height);
    for(let pos in world) { let [bx, by] = pos.split(",").map(Number); drawBlock(bx, by); }

    // Part√≠culas
    particles.forEach((p, i) => {
        p.x += p.vx; p.y += p.vy; p.life -= 0.05;
        ctx.fillStyle = `rgba(255,255,255,${p.life})`; ctx.fillRect(p.x, p.y, 5, 5);
        if(p.life <= 0) particles.splice(i, 1);
    });

    // Skins
    let color = "#3a81a7";
    if(currentSkin === 'alex') color = "#e67e22";
    if(currentSkin === 'mrbeast') color = "#00a8ff";
    if(currentSkin === 'herobrine') color = "#333";
    
    ctx.fillStyle = color; ctx.fillRect(player.x-cameraX, player.y, 30, 60);
    ctx.fillStyle = "#ffdbac"; ctx.fillRect(player.x-cameraX+5, player.y+5, 20, 20);

    if(currentSkin === 'herobrine') {
        ctx.fillStyle = "white"; ctx.shadowBlur = 10; ctx.shadowColor = "white";
        ctx.fillRect(player.x-cameraX+8, player.y+10, 4, 4); ctx.fillRect(player.x-cameraX+18, player.y+10, 4, 4);
        ctx.shadowBlur = 0;
    }

    if(player.y > canvas.height + 200) { gameRunning = false; document.getElementById("deathMenu").style.display = "flex"; }
    document.getElementById("dist").innerText = distAtual;
    document.getElementById("coins").innerText = coins;
    requestAnimationFrame(loop);
}

// Controlos
let clicks = 0;
document.getElementById("ui").onclick = () => { clicks++; if(clicks >= 5) { clicks=0; openAdmin(); } };

const bind = (id, f, e) => {
    let el = document.getElementById(id);
    el.addEventListener("touchstart", (ev) => { ev.preventDefault(); f(); });
    if(e) el.addEventListener("touchend", (ev) => { ev.preventDefault(); e(); });
};
bind("btnLeft", () => input.left = true, () => input.left = false);
bind("btnRight", () => input.right = true, () => input.right = false);
bind("btnJump", () => { if(player.onGround || godMode) player.vy = -17; });
bind("btnPower", () => triggerPower());

window.onkeydown = (e) => {
    if(e.key.toLowerCase() === "p") openAdmin();
    if(e.key === "ArrowLeft") input.left = true;
    if(e.key === "ArrowRight") input.right = true;
    if(e.key === " ") if(player.onGround || godMode) player.vy = -17;
    if(e.key.toLowerCase() === "w") triggerPower();
};
window.onkeyup = (e) => { if(e.key === "ArrowLeft") input.left = false; if(e.key === "ArrowRight") input.right = false; };
</script>
</body>
</html>
