<!DOCTYPE html>
<html>
<head>
    <title>Mini-Craft 2D</title>
    <style>
        body { margin: 0; overflow: hidden; background: #87CEEB; }
        canvas { display: block; background: #70c5ce; }
    </style>
</head>
<body>
<canvas id="gameCanvas"></canvas>

<script>
const canvas = document.getElementById("gameCanvas");
const ctx = canvas.getContext("2d");

canvas.width = window.innerWidth;
canvas.height = window.innerHeight;

const gridSize = 40;
const player = { x: 100, y: 100, w: 30, h: 50, vx: 0, vy: 0, speed: 5, jump: -12 };
const gravity = 0.6;
let world = {}; // Armazena blocos: "x,y": color

// Gerar solo simples
for(let x = 0; x < canvas.width; x += gridSize) {
    for(let y = 300; y < canvas.height; y += gridSize) {
        let type = y === 300 ? "#2ecc71" : "#795548"; // Grama ou Terra
        world[`${x},${y}`] = type;
    }
}

const keys = {};
window.onkeydown = (e) => keys[e.code] = true;
window.onkeyup = (e) => keys[e.code] = false;

// Clique para quebrar ou colocar blocos
canvas.onmousedown = (e) => {
    const gx = Math.floor(e.clientX / gridSize) * gridSize;
    const gy = Math.floor(e.clientY / gridSize) * gridSize;
    if (world[`${gx},${gy}`]) delete world[`${gx},${gy}`]; // Quebra
    else world[`${gx},${gy}`] = "#795548"; // Coloca terra
};

function update() {
    // Movimento lateral
    if (keys["KeyA"]) player.vx = -player.speed;
    else if (keys["KeyD"]) player.vx = player.speed;
    else player.vx *= 0.8;

    // Gravidade e Pulo
    player.vy += gravity;
    player.x += player.vx;
    player.y += player.vy;

    // Colisão simples com o chão (Y)
    const gx = Math.floor((player.x + player.w/2) / gridSize) * gridSize;
    const gy = Math.floor((player.y + player.h) / gridSize) * gridSize;
    
    if (world[`${gx},${gy}`]) {
        player.y = gy - player.h;
        player.vy = 0;
        if (keys["Space"]) player.vy = player.jump;
    }

    draw();
    requestAnimationFrame(update);
}

function draw() {
    ctx.clearRect(0, 0, canvas.width, canvas.height);
    
    // Desenhar Mundo
    for (let pos in world) {
        const [x, y] = pos.split(",").map(Number);
        ctx.fillStyle = world[pos];
        ctx.fillRect(x, y, gridSize, gridSize);
        ctx.strokeStyle = "rgba(0,0,0,0.1)";
        ctx.strokeRect(x, y, gridSize, gridSize);
    }

    // Desenhar Jogador
    ctx.fillStyle = "#e74c3c";
    ctx.fillRect(player.x, player.y, player.w, player.h);

    // Instruções
    ctx.fillStyle = "black";
    ctx.font = "16px Arial";
    ctx.fillText("A/D: Mover | Espaço: Pular | Clique: Quebrar/Colocar blocos", 20, 30);
}

update();
</script>
</body>
</html>
